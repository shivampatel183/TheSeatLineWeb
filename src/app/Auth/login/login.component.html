<section class="auth-page">
  <div class="auth-container">
    <div class="mx-auto w-full max-w-md sm:max-w-lg">
      <div class="auth-card">
        <div class="auth-header">
          <h2 class="auth-title">Welcome Back</h2>
          <p class="auth-subtitle">Sign in to access your account</p>
        </div>

        <form (ngSubmit)="onLogin(loginForm)" #loginForm="ngForm" class="auth-form" novalidate>
          <div *ngFor="let field of loginFields" class="auth-field">
            <label [for]="field.name" class="auth-label">{{ field.label }}</label>
            <div class="relative">
              <input
                [id]="field.name"
                [type]="getInputType(field)"
                [name]="field.name"
                [placeholder]="field.placeholder"
                [autocomplete]="field.autocomplete"
                [ngModel]="getFieldValue(field)"
                (ngModelChange)="setFieldValue(field, $event)"
                #control="ngModel"
                [required]="true"
                [minlength]="field.key === 'password' ? 8 : null"
                class="auth-input"
                [class.pr-20]="field.key === 'password'"
              />
              <button
                *ngIf="field.key === 'password'"
                type="button"
                (click)="togglePasswordVisibility()"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-xs font-medium text-slate-600"
              >
                {{ showPassword ? 'Hide' : 'Show' }}
              </button>
            </div>
            <small class="text-red-600 text-xs" *ngIf="control.invalid && (control.dirty || control.touched)">
              <span *ngIf="control.errors?.['required']">{{ field.label }} is required.</span>
              <span *ngIf="control.errors?.['minlength']">Password must be at least 8 characters.</span>
            </small>
          </div>

          <div class="auth-row">
            <label class="flex items-center gap-2">
              <input
                type="checkbox"
                [(ngModel)]="loginData.rememberMe"
                name="rememberMe"
                class="h-4 w-4 rounded border-slate-300 text-rose-600"
              />
              <span class="text-xs text-slate-600 sm:text-sm">Remember me</span>
            </label>
            <a href="#" class="auth-link text-xs sm:text-sm">Forgot password?</a>
          </div>

          <button type="submit" class="auth-submit" [disabled]="loginForm.invalid || isSubmitting">
            {{ isSubmitting ? 'Signing In...' : 'Sign In' }}
          </button>
        </form>

        <div class="auth-divider">
          <div class="auth-divider-line">
            <span class="w-full border-t border-slate-200"></span>
          </div>
          <div class="auth-divider-label-wrap">
            <span class="auth-divider-label">Or continue with</span>
          </div>
        </div>

        <div class="flex justify-center">
          <app-google-login></app-google-login>
        </div>

        <p class="auth-footer-text">
          Don't have an account?
          <a routerLink="/register" class="auth-link">Sign up here</a>
        </p>
      </div>
    </div>
  </div>
</section>
